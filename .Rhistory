dload("Graptemys_oculifera","3270","10")
dload("Lycaeides_argyrognomon_lotis","3960","11")
dload("Lycaeides_argyrognomon_lotis","1863","08")
dload("Myotis_grisescens","2625","09")
dload("Oncorhynchus_clarkii_henshawi","2389","09")
dload("Urocitellus_brunneus","3945","11")
dload("Strix_occidentalis_lucida","4262","13")
dload("Thamnophis_sirtalis_tetrataenia","774","06")
dload("Oncorhynchus_clarkii_henshawi","2389","09")
load("C:/Users/mevans/repos/recovery_units/data.RData")
library(dplyr,stringr)
library(rvest)
link <- read_html(https://ecos.fws.gov/ecp0/profile/speciesProfile?sId=781#status)%>%
html_nodes('a')%>%
html_attr("href")%>%
str_subset("Reclassification")
link <- read_html("https://ecos.fws.gov/ecp0/profile/speciesProfile?sId=781#status")%>%
html_nodes('a')%>%
html_attr("href")%>%
str_subset("Reclassification")
library(stringr)
link <- read_html("https://ecos.fws.gov/ecp0/profile/speciesProfile?sId=781#status")%>%
html_nodes('a')%>%
html_attr("href")
link
link <- read_html("https://ecos.fws.gov/ecp0/profile/speciesProfile?sId=781#status")%>%
html_nodes('a')
link
link <- read_html("https://ecos.fws.gov/ecp0/profile/speciesProfile?sId=781#status")%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification")
link
list<- compare$Scientific
list[c(55, 30, 40, 52)] <- c("Urocitellus brunneus", "Lessingia germanorum", "Euphydryas editha bayensis", NA)
for(sp in list){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification")
if(length(link)>0){
return(link)}}
list
for(sp in list){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification")
print(length(link))
if(length(link)>0){
print(link)}}
list
for(sp in list[24:55]){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification")
print(length(link))
if(length(link)>0){
print(link)}}
for(sp in list[29:55]){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification|Reclassify")
print(length(link))
if(length(link)>0){
print(link)}}
for(sp in list[35:55]){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification|Reclassify")
print(length(link))
if(length(link)>0){
print(link)}}
for(sp in list[53:55]){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification|Reclassify")
print(length(link))
if(length(link)>0){
print(link)}}
for(sp in list[9]){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification|Reclassify")
print(length(link))
if(length(link)>0){
print(link)}}
for(sp in list){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification|Reclassify")
print(length(link))
if(length(link)>0){
print(link)}}
list
list <- list[-c(28,34,52)]
list
for(sp in list){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification|Reclassify")
print(length(link))
if(length(link)>0){
print(link)}}
list
list[23]<- "Purshia"
for(sp in list[23:52]){
print(sp)
spp_pg <- filter(TECP_domestic, grepl(sp, Scientific_Name), Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")$Species_Page
link <- read_html(spp_pg)%>%
html_nodes('a')%>%
#html_attr("href")%>%
str_subset("Reclassification|Reclassify")
print(length(link))
if(length(link)>0){
print(link)}}
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
load("C:/Users/mevans/repos/recovery_units/data.RData")
plot_ly(type = "box")%>%
add_trace(y = table(test$Scientific, test$consult_type)[,1]/table(test$Scientific), name = "All")%>%
add_trace(y = compare$fcons[compare$Units>0]/compare$cons[compare$Units>0], type = "box", name = "RUs")
library(plotly)
library(dplyr)
plot_ly(type = "box")%>%
add_trace(y = table(test$Scientific, test$consult_type)[,1]/table(test$Scientific), name = "All")%>%
add_trace(y = compare$fcons[compare$Units>0]/compare$cons[compare$Units>0], type = "box", name = "RUs")
View(compare)
plot_ly(type = "box")%>%
add_trace(y = compare$fcons[compare$Units>0]/compare$cons[compare$Units>0], type = "box", name = "RUs")%>%
add_trace(y = compare$fcons[compare$Units == 0]/compare$cons[compare$Units == 0], type = "box", name = "Non")
compare$frate <- compare$fcons/compare$cons
compare$group[32:55] <- "C"
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
compare$admo <- NULL
load("C:/Users/mevans/repos/recovery_units/data.RData")
compare$admo <- NULL
install.packages("party")
library(party)
ctree(group ~ Group+Region+Area+Status+Priority, data = compare)
str(compare)
compare$group <- as.factor(compare$group)
ctree(group ~ Group+Region+Area+Status+Priority, data = compare)
str(compare)
compare$Region < as.factor(compare$Region)
compare$Region <- as.factor(compare$Region)
compare$Status <- as.factor(compare$Status)
compare$Units <- as.integer(compare$Units)
compare$Priority <- as.integer(compare$Priority)
compare$Range <- as.integer(compare$Range)
ctree(group ~ Group+Region+Area+Status+Priority, data = compare)
plot(ctree(group ~ Group+Region+Area+Status+Priority, data = compare))
str(compare)
install.packages("tree")
library(tree)
plot(tree(group ~ Group + Region + Status + Area))
plot(tree(group ~ Group + Region + Status + Area, data = compare))
summary(tree(group ~ Group + Region + Status + Area, data = compare))
rm(all)
head(species)
str(species)
unique(species$group)
grepl("Salvelinus confluentus", species$Scientific)
grep("Salvelinus confluentus", species$Scientific)
library(dplyr)
species2 <- select(TECP_domestic, Scientific_Name, Species_Group, Lead_Region, Federal_Listing_status)%>%
right_join(species, by = c("Scientific_Name" = "Scientific"))
species2 <- select(TECP_domestic, Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
right_join(species, by = c("Scientific_Name" = "Scientific"))
species2 <- select(TECP_domestic, Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
left_join(species, by = c("Scientific_Name" = "Scientific"))
species2 <- select(TECP_domestic, Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
right_join(., species, by = c("Scientific_Name" = "Scientific"))
head(species2)
filter(species2, is.na(Lead_Region))
duplicated(species2$Scientific_Name)
filter(species2, duplicated(Scientific_Name))
species2 <- filter(TECP_domestic, Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")%>%
select(TECP_domestic, Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
right_join(., species, by = c("Scientific_Name" = "Scientific"))
species2 <- filter(TECP_domestic, Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")%>%
select(Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
right_join(., species, by = c("Scientific_Name" = "Scientific"))
filter(species2, duplicated(Scientific_Name))
"Megaptera novaeangeliae" %in% species$Scientific
species2 <- filter(TECP_domestic, Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened", Lead_Region != "NMFS")%>%
select(Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
right_join(., species, by = c("Scientific_Name" = "Scientific"))
filter(species2, duplicated(Scientific_Name))
"Chelonia mydas" %in% species$Scientific
"Rana muscosa" %in% species$Scientific
species2["Scientific_Name" == "Rana muscosa", ]
species2[Scientific_Name == "Rana muscosa", ]
species2[species2$Scientific_Name == "Rana muscosa", ]
species2[1149, ] <- NULL
species2[species2$Scientific_Name == "Chelonia mydas", ]
filter(species, Scientific == "Chelonia mydas")
species2[species2$Scientific_Name == "Charadrius melodius", ]
species2[species2$Scientific_Name == "Charadrius melodus", ]
filter(esacounties, County_name == "Inyo")
species2 <- filter(TECP_domestic, Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened", Lead_Region != "NMFS")%>%
select(Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
right_join(., species, by = c("Scientific_Name" = "Scientific"))
filter(species2, duplicated(Scientific_Name))
species2[species2$Scientific_Name == "Rana muscosa", ]
species2[1149, 5] <- 4
filter(esacounties, County_name == "Los Angeles"|"Riverside"|"San Bernardino"|"Ventura")%>%summarise(area = sum(ALAND, na.rm = TRUE))
filter(esacounties, County_name == "Los Angeles"|"Riverside"|"San Bernardino"|"Ventura")
filter(esacounties, County_name == "Los Angeles"|County_name == "Riverside"|County_name == "San Bernardino"|County_name == "Ventura")
filter(county_stats, NAME == "Los Angeles"|NAME == "Riverside"|NAME == "San Bernardino"|name == "Ventura")
filter(county_stats, NAME == "Los Angeles"|NAME == "Riverside"|NAME == "San Bernardino"|NAME == "Ventura")
filter(county_stats, NAME == "Los Angeles"|NAME == "Riverside"|NAME == "San Bernardino"|NAME == "Ventura")%>%summarise(a = sum(ALAND))
species2[1149, "Area"] <- 85895831719
filter(species2, duplicated(Scientific_Name))
filter(county_stats, NAME == "Fresno"|NAME == "Inyo"|NAME == "Kern"|NAME == "Madera"|NAME == "Mono"|NAME == "Tulare")%>%summarise(a = sum(ALAND))
filter(species2, Scientific_Name == "Rana muscosa")
species2[1149, "Area"] <- 88790046016
filter(species2, Scientific_Name == "Ambystoma californiense")
species2[1149, "Area"] <- 85895831719
species2[1150, "Area"] <- 88790046016
filter(species2, Scientific_Name == "Rana muscosa")
filter(county_stats, NAME == "Sonoma"|NAME == "Marin")%>%summarise(a = sum(ALAND))
filter(county_stats, NAME == "Santa Barbara")%>%summarise(a = sum(ALAND))
species2[species2$Scientific_Name == "Smbystoma californiense"]
species2[species2$Scientific_Name == "Ambystoma californiense"]
species2[species2$Scientific_Name == "Ambystoma californiense", ]
species2[1369, 5:6] <- c(2, 5429470554)
species2[1370, 5:6] <- c(1, 7083927512)
species2[1371, 5:6] <- c(30, 152222337622 - 5429470554 - 7083927512)
species2[species2$Scientific_Name == "Ambystoma californiense", ]
species2[species2$Scientific_Name == "Charadrius melodus", ]
species2[species2$Scientific_Name == "Canis lupus", ]
species2[species2$Scientific_Name == "Sterna dougallii dougallii", ]
species2$Group <- sapply(species2$Species_Group, function(x)
if(x == "Ferns and Allies"|x == "Flowering Plants"|x == "Conifers and Cycads"|x == "Lichens"){
"Plants and Lichens"}
else if(x == "Snails"|x=="Clams"){
"Molluscs"}else{x})
species2$Species_Group <- sapply(species2$Species_Group, function(x)
if(x == "Ferns and Allies"|x == "Flowering Plants"|x == "Conifers and Cycads"|x == "Lichens"){
"Plants and Lichens"}
else if(x == "Snails"|x=="Clams"){
"Molluscs"}else{x})
unique(species2$Species_Group)
filter(species2, is.na(Species_Group))
filter(TECP_domestic, Scientific_Name == "Haliotis sorenseni"
)
filter(TECP_domestic, Scientific_Name == "Pristis pectinata")
filter(TECP_domestic, Scientific_Name == "Accipiter gentilis")
filter(TECP_domestic, Scientific_Name == "Accipiter gentilis leingi")
filter(TECP_domestic, Scientific_Name == "Accipiter gentilis laingi")
species[species$Scientific == "Eubalaena japonica", ]
species2 <- filter(TECP_domestic, Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")%>%
select(Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
right_join(., species, by = c("Scientific_Name" = "Scientific"))
str(species2)
species2$Species_Group <- sapply(species2$Species_Group, function(x)
if(x == "Ferns and Allies"|x == "Flowering Plants"|x == "Conifers and Cycads"|x == "Lichens"){
"Plants and Lichens"}
else if(x == "Snails"|x=="Clams"){
"Molluscs"}else{x})
filter(species2, is.na(Species_Group))
species2 <- filter(TECP_domestic, Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened", Lead_Region != "NMFS")%>%
select(Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
inner_join(., species, by = c("Scientific_Name" = "Scientific"))
species2$Species_Group <- sapply(species2$Species_Group, function(x)
if(x == "Ferns and Allies"|x == "Flowering Plants"|x == "Conifers and Cycads"|x == "Lichens"){
"Plants and Lichens"}
else if(x == "Snails"|x=="Clams"){
"Molluscs"}else{x})
head(species2)
filter(species2, duplicated(Scientific_Name))
species2[species2$Scientific_Name == "Ambystoma californiense", ]
species2[37, 5:6] <- c(2, 5429470554)
species2[38, 5:6] <- c(1, 7083927512)
species2[39, 5:6] <- c(30, 152222337622 - 7083927512 - 5429470554)
species2[species2$Scientific_Name == "Rana muscosa", ]
species2[1131, "Area"] <- 88790046016
species2[1130, 5:6] <- c(4, 126597256825 - 88790046016)
species2[species2$Scientific_Name == "Sterna dougallii dougallii", ]
filter(county_stats, NAME == "Aguada"|NAME = "Aguadilla"|NAME == "Arecibo"|NAME=="Barceloneta"|NAME=="Cabo Rojo"|NAME=="Culebra"|NAME=="Fajardo"|NAME=="Guanica"|NAME=="Guayanilla"|NAME == "Lajas"|NAME == "Manati"|NAME=="Penuelas"|NAME=="Ponce"|NAME=="Rincon"|NAME=="San Juan"|NAME == "Vieques"|NAME=="St. Croix"|NAME=="St. John"|NAME == "St. Thomas")%>%summarise(a = sum(ALAND, na.rm = TRUE))
filter(county_stats, NAME == "Aguada"|NAME == "Aguadilla"|NAME == "Arecibo"|NAME=="Barceloneta"|NAME=="Cabo Rojo"|NAME=="Culebra"|NAME=="Fajardo"|NAME=="Guanica"|NAME=="Guayanilla"|NAME == "Lajas"|NAME == "Manati"|NAME=="Penuelas"|NAME=="Ponce"|NAME=="Rincon"|NAME=="San Juan"|NAME == "Vieques"|NAME=="St. Croix"|NAME=="St. John"|NAME == "St. Thomas")%>%summarise(a = sum(ALAND, na.rm = TRUE))
species2[1251, 5:6] <- c(20, 39862735170)
species2[1252, 5:6] <- c(28, 64115867954 - 39862735170)
species2[species2$Scientific_Name == "Charadrius melodus", ]
species2[species2$Scientific_Name == "Canis lupus", ]
species2 <- species2[-c(207,173), ]
filter(species2, duplicated(Scientific_Name))
species2[species2$Scientific_Name == "Caretta caretta", ]
species2[177, 5:6] <- c(84, 168262400000)
species2[178, 5:6] <- c(7, 40726910000)
filter(esacounties, Scientific_Name == "Chelonia mydas")
filter(esacounties, Scientific == "Chelonia mydas")
species2[species2$Scientific_Name == "Chelonia mydas", ]
species2<-species2[-c(213, 214, 216, 217), ]
species2[species2$Scientific_Name == "Chelonia mydas", ]
species2[species2$Scientific_Name == "Canis lupus", ]
species2 <- filter(TECP_domestic, Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened", Lead_Region != "NMFS")%>%
select(Scientific_Name, Species_Group, Lead_Region, Federal_Listing_Status)%>%
inner_join(., species, by = c("Scientific_Name" = "Scientific"))
species2$Species_Group <- sapply(species2$Species_Group, function(x)
if(x == "Ferns and Allies"|x == "Flowering Plants"|x == "Conifers and Cycads"|x == "Lichens"){
"Plants and Lichens"}
else if(x == "Snails"|x=="Clams"){
"Molluscs"}else{x})
species2[species2$Scientific_Name == "Ambystoma californiense", ]
species2[37, 5:6] <- c(2, 5429470554)
species2[38, 5:6] <- c(1, 7083927512)
species2[39, 5:6] <- c(30, 152222337622 - 7083927512 - 5429470554)
species2[37, 5:6] <- c(2, 5429470554)
species2[38, 5:6] <- c(1, 7083927512)
species2[39, 5:6] <- c(30, 152222337622 - 7083927512 - 5429470554)
#roseate tern
species2[1131, "Area"] <- 88790046016
species2[1130, 5:6] <- c(4, 126597256825 - 88790046016)
#rana muscosa
species2[1251, 5:6] <- c(20, 39862735170)
species2[1252, 5:6] <- c(28, 64115867954 - 39862735170)
#Loggerhead
species2[177, 5:6] <- c(84, 168262400000)
species2[178, 5:6] <- c(7, 40726910000)
species2[speceis$Scientific_Name == "Chelonia mydas"]
species2[species$Scientific_Name == "Chelonia mydas", ]
species2[species$Scientific == "Chelonia mydas", ]
species2[species2$Scientific_Name == "Chelonia mydas", ]
species2 <- species2[-c(173, 207, 212, 213, 215, 217), ]
species2[species2$Scientific_Name == "Chelonia mydas", ]
species2[214, ]
species2[208, ]
species2[209, ]
species2[210, ]
species2[210, 5:6] <- c(4, 6995840)
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
load("C:/Users/mevans/repos/recovery_units/data.RData")
species2[species2$Scientific_Name == "Carreta carreta"]
species2[species2$Scientific_Name == "Chelonia mydas"]
species2[species2$Scientific_Name == "Chelonia mydas", ]
load("C:/Users/mevans/repos/recovery_units/data.RData")
colnames(species2)
colnames(species2)[5]<-"Range"
colnames(species2)
str(species2)
species2[2:4]<-as.factor(species2[2:4])
species2[, 2:4]<-as.factor(species2[, 2:4])
str(species2)
species2$Species_Group<-as.factor(species2$Species_Group)
species2$Lead_Region<-as.factor(species2$Lead_Region)
species2$Federal_Listing_Status<-as.factor(species2$Federal_Listing_Status)
str(compare)
species2$group<-as.factor(species2$group)
library(dplyr)
species2$Priority <- as.data.frame(select(spp_plans, Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_joion(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Species_Recovery_Priority_Number))
species2$Priority <- as.data.frame(select(spp_plans, Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Species_Recovery_Priority_Number))
length(as.data.frame(select(spp_plans, Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Species_Recovery_Priority_Number)))
nrow(as.data.frame(select(spp_plans, Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Species_Recovery_Priority_Number)))
duplicated(spp_plans$Species_Scientific_Name)
filter(spp_plans, duplicated(Species_Scientific_Name))
nrow(as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Species_Recovery_Priority_Number)))
nrow(as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name", "Species_Listing_Status" = "Federal_Listing_Status"))%>%
select(Species_Recovery_Priority_Number)))
nrow(as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Species_Recovery_Priority_Number, Species_Listing_Status)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name", "Species_Listing_Status" = "Federal_Listing_Status"))%>%
select(Species_Recovery_Priority_Number)))
filter(species2, duplicated(Scientific))
filter(species2, duplicated(Scientific_Name))
filter(spep_plans, Species_Scientific_Name == "Abystoma californiense")
filter(spp_plans, Species_Scientific_Name == "Abystoma californiense")
filter(spp_plans, Species_Scientific_Name == "Ambystoma californiense")
filter(spp_plans, Species_Scientific_Name == "Sterna dougallii dougallii")
nrow(as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Species_Recovery_Priority_Number, Species_Listing_Status)%>%
group_by(Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name", "Species_Listing_Status" = "Federal_Listing_Status"))%>%
select(Species_Recovery_Priority_Number)))
nrow(as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Species_Recovery_Priority_Number, Species_Listing_Status)%>%
group_by(Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name", "Species_Listing_Status" = "Federal_Listing_Status"))%>%
select(Species_Recovery_Priority_Number)))
nrow(as.data.frame(group_by(spp_plans, Species_Scientific_Name, Species_Recovery_Priority_Number)))
nrow(as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
distinct()%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Species_Recovery_Priority_Number)))
species2$Priority <- as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Species_Recovery_Priority_Number)%>%
distinct()%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Species_Recovery_Priority_Number))
species2$Office <- as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Plan_Lead_Office__FWS_)%>%
distinct()%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name"))%>%
select(Plan_Lead_Office__FWS_))
nrow(as.data.frame(filter(spp_plans, Species_Listing_Status == "Threatened"|Species_Listing_Status=="Endangered")%>%
select(Species_Scientific_Name, Plan_Lead_Office__FWS_, Species_Listing_Status)%>%
distinct()%>%
right_join(species2, by = c("Species_Scientific_Name" = "Scientific_Name", "Species_Listing_Status" = "Federal_Listing_Status"))%>%
select(Plan_Lead_Office__FWS_)))
colnames(species2)
colnames(species2)[1:4]<-c("Scientific", "Group", "Region", "Status")
str(species2)
species2$Priority <- as.vector(species2$Priority)
str(species2)
species2$Priority <- species2$Priority$Species_Recovery_Priority_Number
str(species2)
head(species2$Priority, 20)
as.integer("6C")
strsplit("6C", "C")
gsub("6C", "C", "")
gsub("C", "", "6C")
lapply(species2$Priority, funciton(x) gsub("C", "", x))
lapply(species2$Priority, function(x) gsub("C", "", x))
str(species2)
for(i in species$Priority){}
vapply(species2$Priority, function(x) gsub("C", "", x))
sapply(species2$Priority, function(x) gsub("C", "", x))
unlist(lapply(species2$Priority, function(x) gsub("C", "", x)))
species2$Priority2 <- unlist(lapply(species2$Priority, function(x) gsub("C", "", x)))
str(species2)
species$Priority <- as.integer(species$Priority2)
species2$Priority <- as.integer(species2$Priority2)
species2$Priority2 <- NULL
str(species2)
filter(species2, is.na(Priority))
spp_plans(filter, grepl("Zapus", Species_Scientific_Name))
filter(spp_plans, grepl("Zapus", Species_Scientific_Name))
filter(spp_plans, grepl("Ursus", Species_Scientific_Name))
filter(spp_plans, grepl("Rana mucosa", Species_Scientific_Name))
filter(spp_plans, grepl("Rana muscosa", Species_Scientific_Name))
filter(spp_plans, grepl("Salvelinus", Species_Scientific_Name))
compare$Scientific %in% species2$Scientific
compare$Scientific[!(compare$Scientific %in% species2$Scientific)]
nrow(species2[-c(species2$Scientific %in% compare$Scientific), ])
nrow(species2)
nrow(species2[(species2$Scientific %in% compare$Scientific), ])
nrow(species2[!(species2$Scientific %in% compare$Scientific), ])
species2 <- species2[!(species2$Scientific %in% compare$Scientific), ]
filter(species2, grepl("brunneus", Scientific))
filter(species2, grepl("Euphydryas", Scientific))
species2[grepl("Euphydryas editha", species2$Scientific)|grepl("Lessingia germanorum", species2$Scientific))
species2[grepl("Euphydryas editha", species2$Scientific)|grepl("Lessingia germanorum", species2$Scientific), ]
species2[grepl("Euphydryas editha", species2$Scientific)|grepl("Lessingia", species2$Scientific), ]
species2[grepl("Euphydryas editha quino", species2$Scientific)|grepl("Lessingia", species2$Scientific), ]
species2[grepl("Urocitellus", species2$Scientific)|grepl("Lessingia", species2$Scientific), ]
species2[grepl("Spermophilus", species2$Scientific)|grepl("Lessingia", species2$Scientific), ]
species2[grepl("Lessingia", species2$Scientific), ]
species2[grepl("Catostomu", species2$Scientific), ]
species2 <- species2[-c(537,538), ]
filter(species2, is.na(Priority))
species2$Priority[species2$Scientific == "Lynx canadensis"] <- 15
library("ecosscraper", lib.loc="~/R/win-library/3.3")
detach("package:ecosscraper", unload=TRUE)
load("C:/Users/mevans/repos/ecosscraper/data/TECP_table.rda")
TECP_domestic <- filter(TECP_table, U_S__or_ForeignListed == "US")
species2$Scientific[!species2$Scientific %in% TECP_domesitc$Scientific_Name]
species2$Scientific[!species2$Scientific %in% TECP_domestic$Scientific_Name]
filter(TECP_table, Scientific_Name == "Ursus maritimus")
filter(TECP_table, Scientific_Name == "Leopardus paradalis")
filter(TECP_table, Scientific_Name == "Leopardus (=felis) paradalis")
filter(TECP_table, Scientific_Name == "Leopardus (=Felis) paradalis")
filter(TECP_table, Scientific_Name == "Leopardus (=Felis) pardalis")
TECP_domestic <- filter(TECP_table, U_S__or_ForeignListed == "US"|U_S__or_ForeignListed == "US/Foreign")
species2$Scientific[!species2$Scientific %in% TECP_domestic$Scientific_Name]
unique(TECP_domestic$Federal_Listing_Status)
TECP_domestic <- filter(TECP_table, U_S__or_ForeignListed == "US"|U_S__or_ForeignListed == "US/Foreign", Federal_Listing_Status == "Endangered"|Federal_Listing_Status == "Threatened")
species2$Scientific[!species2$Scientific %in% TECP_domestic$Scientific_Name]
nrow(species2[species2$Scientific %in% TECP_domestic$Scientific_Name])
nrow(species2[species2$Scientific %in% TECP_domestic$Scientific_Name, ])
species2 <- nrow(species2[species2$Scientific %in% TECP_domestic$Scientific_Name, ])
TECP_domestic$Scientific_Name[duplicated(TECP_domestic$Scientific_Name)]
filter(species2, is.na(Priority))
str(species2)
