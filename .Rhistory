Sys.sleep(5)
}
grep("result", c("About", "1", "results"))
as.numeric("1,680")
text
cites
as.numeric(gsub(",","","1,680"))
for(i in 28:60){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
Sys.sleep(5)
}
text
cites
scientific
year
url
length(cites)
str_split(NA, pattern = " ")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
text
text <- NA
is.na(text)
for(i in 43:75){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(text == " "){goddamn$scholar[i] <- 0}
else if(is.na(text)){goddamn$scholar[i] <- NA}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
goddamn[4110, 1]
for(i in 76:100){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(text == " "){goddamn$scholar[i] <- 0}
else if(is.na(text)){goddamn$scholar[i] <- NA}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
text
i
scientific
goddamn[1,100]
goddamn[100,1]
for(i in 100:150){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(is.na(text)){goddamn$scholar[i] <- NA}
else if(text == " "){goddamn$scholar[i] <- 0}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
for(i in 151:200){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(is.na(text)){goddamn$scholar[i] <- NA}
else if(text == " "){goddamn$scholar[i] <- 0}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
i
goddamn$scholar[132] <- 4
goddamn$Scientific[132]
goddamn$scholar[132] <- 9
goddamn$Scientific[185]
goddamn$scholar[186] <- 4
for(i in 187:200){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(is.na(text)){goddamn$scholar[i] <- NA}
else if(text == " "){goddamn$scholar[i] <- 0}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
temp <- data.frame(taxa = c(rep("A",2),"B",rep("F",2),rep("I",4),rep("M",4),rep("P",4),rep("R",4)), Area = c(6937265,4453456,4644421,4360764,19181431,2430,287007,1364136,127473,80828075,7698867,1431711596117,973,102,73700,483935,5225265,627606,6445423,59438))
temp <- data.frame(taxa = c(rep("A",2),"B",rep("F",2),rep("I",4),rep("M",4),rep("P",4),rep("R",4)), Area = c(6937265,4453456,4644421,4360764,19181431,2430,287007,1364136,127473,80828075,7698867,143171,1596117,973,102,73700,483935,5225265,627606,6445423,59438))
boxplot(data = temp, Area~taxa)
hist(temp$Area)
hist(log(temp$Area))
boxplot(data = temp, log(Area)~taxa)
ct
boxplot(data = compare[compare$group == "R"], Area~Group)
boxplot(data = compare[compare$group == "R", ], Area~Group)
boxplot(data = compare[compare$group == "R", ], log(Area)~Group)
group_by(goddamn, Group)%>%summarise(mn = mean(Area, na.rm = TRUE))
boxplot(data = filter(compare, group == "R")%>%, Area~Group)
temp
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
temp2 <- group_by(goddamn, Group)%>%summarise(mn = mean(Area, na.rm = TRUE))
temp2
boxplot(data = filter(compare, group == "R")%>%mutate(mn = Area - temp2$mn[temp2$Group == Group]), mn~Group)
filter(compare, group == "R")%>%mutate(mn = Area - temp2$mn[temp2$Group == Group])
compare$Area[compare$Group == "Plants"] - 16799385242
compare$Area[compare$Group == "Insects"] - 20215311891
compare$Area[compare$Group == "Reptiles"] - 82950312857
compare$Area[compare$Group == "Plants" & compare$group = "R"] - 16799385242
compare$Area[compare$Group == "Plants" & compare$group == "R"] - 16799385242
compare$Area[compare$Group == "Insects" & compare$group == "R"] - 20215311891
boxplot(compare$Area[compare$Group == "Insects" & compare$group == "R"] - 20215311891)
boxplot(compare$Area[compare$Group == "Plants" & compare$group == "R"] - 16799385242, add = TRUE)
boxplot(
compare$Area[compare$Group == "Plants" & compare$group = "R"] - 16799385242,
compare$Area[compare$Group == "Insects" & compare$group == "R"] - 20215311891,
compare$Area[compare$Group == "Amphibians" & compare$group == "R"] - 47111867447,
compare$Area[compare$Group == "Birds" & compare$group == "R"] - 182677165090,
compare$Area[compare$Group == "Reptiles" & compare$group == "R"] - 82950312857,
compare$Area[compare$Group == "Fish" & compare$group == "R"] - 58421999611,
compare$Area[compare$Group == "Mammals" & compare$group == "R"] - 167986520279)
boxplot(
compare$Area[compare$Group == "Plants" & compare$group == "R"] - 16799385242,
compare$Area[compare$Group == "Insects" & compare$group == "R"] - 20215311891,
compare$Area[compare$Group == "Amphibians" & compare$group == "R"] - 47111867447,
compare$Area[compare$Group == "Birds" & compare$group == "R"] - 182677165090,
compare$Area[compare$Group == "Reptiles" & compare$group == "R"] - 82950312857,
compare$Area[compare$Group == "Fish" & compare$group == "R"] - 58421999611,
compare$Area[compare$Group == "Mammals" & compare$group == "R"] - 167986520279)
for(i in 187:200){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(is.na(text)){goddamn$scholar[i] <- NA}
else if(text == " "){goddamn$scholar[i] <- 0}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
url <- "http://web.b.ebscohost.com.ezproxy.lib.uconn.edu/ehost/results?sid=01835d90-d711-4c01-9218-d23bc8d5f183%40sessionmgr104&vid=0&hid=128&bquery=(SU+genetic)+AND+(AB+strix+occidentalis+caurina)&bdata=JmRiPWFwaCZjbGkwPURUMSZjbHYwPTAwMDAwMS0yMDExMTImdHlwZT0xJnNpdGU9ZWhvc3QtbGl2ZSZzY29wZT1zaXRl"
sess <- html_session(url)
html_form(sess)[[2]]
html_form(sess)[[1]]
url <- "http://web.b.ebscohost.com.ezproxy.lib.uconn.edu/ehost/results?sid=01835d90-d711-4c01-9218-d23bc8d5f183%40sessionmgr104&vid=0&hid=128&bquery=(SU+genetic)+AND+(AB+strix+occidentalis+caurina)&bdata=JmRiPWFwaCZjbGkwPURUMSZjbHYwPTAwMDAwMS0yMDExMTImdHlwZT0xJnNpdGU9ZWhvc3QtbGl2ZSZzY29wZT1zaXRl"
sess <- html_session(url)
form <- html_form(sess)[[1]]
filled_form <- set_values(form, 'username' = "mje12002", 'password' = "Cougars26")
submit_form(sess, filled_form)
nodes <- jump_to(url)%>%
read_html()%>%
html_nodes("a")
url <- "http://web.b.ebscohost.com.ezproxy.lib.uconn.edu/ehost/results?sid=01835d90-d711-4c01-9218-d23bc8d5f183%40sessionmgr104&vid=0&hid=128&bquery=(SU+genetic)+AND+(AB+strix+occidentalis+caurina)&bdata=JmRiPWFwaCZjbGkwPURUMSZjbHYwPTAwMDAwMS0yMDExMTImdHlwZT0xJnNpdGU9ZWhvc3QtbGl2ZSZzY29wZT1zaXRl"
sess <- html_session(url)
form <- html_form(sess)[[1]]
filled_form <- set_values(form, 'username' = "mje12002", 'password' = "Cougars26")
submit_form(sess, filled_form)
nodes <- jump_to(sess, url)%>%
read_html()%>%
html_nodes("a")
nodes
url <- "http://web.b.ebscohost.com.ezproxy.lib.uconn.edu/ehost/results?sid=01835d90-d711-4c01-9218-d23bc8d5f183%40sessionmgr104&vid=0&hid=128&bquery=(SU+genetic)+AND+(AB+strix+occidentalis+caurina)&bdata=JmRiPWFwaCZjbGkwPURUMSZjbHYwPTAwMDAwMS0yMDExMTImdHlwZT0xJnNpdGU9ZWhvc3QtbGl2ZSZzY29wZT1zaXRl"
sess <- html_session(url)
form <- html_form(sess)[[1]]
filled_form <- set_values(form, 'username' = "mje12002", 'password' = "Cougars26")
submit_form(sess, filled_form)
page <- jump_to(sess, url)
doc <- read_html(page)
doc
html_nodes(doc, "a")
page
url <- "http://web.b.ebscohost.com.ezproxy.lib.uconn.edu/ehost/results?sid=01835d90-d711-4c01-9218-d23bc8d5f183%40sessionmgr104&vid=0&hid=128&bquery=(SU+genetic)+AND+(AB+strix+occidentalis+caurina)&bdata=JmRiPWFwaCZjbGkwPURUMSZjbHYwPTAwMDAwMS0yMDExMTImdHlwZT0xJnNpdGU9ZWhvc3QtbGl2ZSZzY29wZT1zaXRl"
sess <- html_session(url)
form <- html_form(sess)[[1]]
filled_form <- set_values(form, 'username' = "mje12002", 'password' = "Cougars26")
submit_form(sess, filled_form)
page <- jump_to(sess, url)
doc <- read_html(page)
html_nodes(doc, "a")
doc
html_nodes(doc, xpath = '//*[contains(concat( " ", @class, " " ), concat( " ", "alt", " " ))]')
html_nodes(doc)
html_nodes(doc, css = "a")
html_nodes(doc, css = "#a")
html_nodes(doc, css = "div")
html_nodes(doc, xpath = '//*[contains(concat( " ", @class, " " ), concat( " ", "alt", " " ))]')
html_nodes(x = doc, "a")
html_nodes(x = doc, "body")
doc <- GET(page)
doc <- html(page)
doc <- read_html(page)
html_nodes(x = doc, "body")
html_nodes(x = doc, "body")%>%
html_text()
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
for(i in 187:200){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(is.na(text)){goddamn$scholar[i] <- NA}
else if(text == " "){goddamn$scholar[i] <- 0}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
library(httr)
a <- httr::GET("http://ecos.fws.gov/ecp/report/table/species-occurrence.json?tsn=202385")
a
str(a)
json <- content(a)
json
library(rvest)
library(dplyr)
library(stringr)
for(i in 187:200){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(is.na(text)){goddamn$scholar[i] <- NA}
else if(text == " "){goddamn$scholar[i] <- 0}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
load("C:/Users/mevans/repos/recovery_units/data.RData")
for(i in 187:200){
text <- NA
scientific <- str_split(goddamn[i, 1], " ")[[1]]
scientific <- paste(scientific[!grepl("\\(", scientific)], collapse = "+")
year <- format(goddamn[i, 6], "%Y")
url <- paste("http://scholar.google.com/scholar?q=\"", scientific, "\"+genetic&hl=en&as_sdt=0%2C9&as_ylo=&as_yhi=",year, sep = "")
text <- try(httr::GET(url, user_agent = agent)%>%
httr::content("parsed")%>%
rvest::html_nodes("#gs_ab_md")%>%
rvest::html_text())
if(is.na(text)){goddamn$scholar[i] <- NA}
else if(text == " "){goddamn$scholar[i] <- 0}
else{
#sometimes text reads 'About XXX resuts', sometimes 'xxx results'
text<- str_split(text, pattern = " ")[[1]]
cites <- text[grep("result", text)-1]
goddamn$scholar[i] <- as.numeric(gsub(",", "", cites))
}
Sys.sleep(5)
}
url <- "http://web.b.ebscohost.com.ezproxy.lib.uconn.edu/ehost/results?sid=01835d90-d711-4c01-9218-d23bc8d5f183%40sessionmgr104&vid=0&hid=128&bquery=(SU+genetic)+AND+(AB+strix+occidentalis+caurina)&bdata=JmRiPWFwaCZjbGkwPURUMSZjbHYwPTAwMDAwMS0yMDExMTImdHlwZT0xJnNpdGU9ZWhvc3QtbGl2ZSZzY29wZT1zaXRl"
sess <- html_session(url)
form <- html_form(sess)[[1]]
filled_form <- set_values(form, 'username' = "mje12002", 'password' = "Cougars26")
submit_form(sess, filled_form)
page <- jump_to(sess, url)
doc <- read_html(page)
html_nodes(x = doc, "body")%>%
html_text()
doc
temp2 <- group_by(goddamn, Group)%>%summarise(md = median(Area, na.rm = TRUE))
temp2
boxplot(
compare$Area[compare$Group == "Plants" & compare$group == "R"] - temp2$md[temp2$Group == "Plants"],
compare$Area[compare$Group == "Insects" & compare$group == "R"] - temp2$md[temp2$Group == "Insects"],
compare$Area[compare$Group == "Amphibians" & compare$group == "R"] - temp2$md[temp2$Group == "Amphibians"],
compare$Area[compare$Group == "Birds" & compare$group == "R"] - temp2$md[temp2$Group == "Birds"],
compare$Area[compare$Group == "Reptiles" & compare$group == "R"] - temp2$md[temp2$Group == "Reptiles"],
compare$Area[compare$Group == "Fish" & compare$group == "R"] - temp2$md[temp2$Group == "Fish"],
compare$Area[compare$Group == "Mammals" & compare$group == "R"] - temp2$md[temp2$Group == "Mammals"])
taxa_stats <- group_by(goddamn, Group)%>%summarise(Area_md = median(Area, na.rm = TRUE),
Area_mn = mean(Area, na.rm = TRUE),
Area_sd = sd(Area),
Prior_md = median(Priority, na.rm = TRUE),
Prior_mn = mean(Priority, na.rm = TRUE),
Prior_sd = sd(Priority, na.rm = TRUE))
rm(temp2)
taxa_stats
changes <- read.table(no_change.txt, header = FALSE, sep = " ")
changes <- read.table("no_change.txt", header = FALSE, sep = " ")
changes <- read.table("/no_change.txt", header = FALSE, sep = " ")
changes <- read.table("./no_change.txt", header = FALSE, sep = " ")
changes <- read.table("FiveYrRev/no_change.txt", header = FALSE, sep = " ")
changes <- read.table("FiveYrRev/new_recovery.txt", header = FALSE, sep = ":")
changes <- read.table("FiveYrRev/new_recovery.txt", header = FALSE, sep = "pdf:")
changes <- read.table("FiveYrRev/new_recovery.txt", header = FALSE, sep = "[0-9]:")
changes <- read.table("FiveYrRev/new_recovery.txt", header = FALSE, sep = "\t")
head(changes)
colnames(changes) <- c("doc", "pg", "text")
changes$text <- str_trim(changes$text, "both")
head(changes)
changes$status <- NA
changes$stats[grepl("no change"), changes$text] <- "NC"
changes$stats[grepl("no change", changes$text)] <- "NC"
changes$stats[grepl("N/A", changes$text)] <- "NC"
changes$stats[grepl("No change", changes$text)] <- "NC"
changes$stats[grepl("Not applicable", changes$text)] <- "NC"
head(changes)
str_extract(changes$text[1:10], pattern = "[1-9][1-9]")
str_extract(changes$text[1:10], pattern = "[1-9]")
str_extract(changes$text[1:10], pattern = "[1-9] ")
str_extract(changes$text[1:10], pattern = " [1-9] ")
str_extract(changes$text[1:10], pattern = ".{0}[1-9].{0}")
str_extract(changes$text[1:10], pattern = ".^[1-9].^")
str_extract(changes$text[1:10], pattern = "^.[1-9]^.")
str_extract(changes$text[1:10], pattern = "^\.[1-9]^\.")
str_extract(changes$text[1:10], pattern = "^\\.[1-9]^\\.")
str_extract(changes$text[1:10], pattern = "\\.[1-9]\\.")
str_extract(changes$text[1:10], pattern = "^\\.[1-9]^\\.")
str_extract(changes$text[1:10], pattern = "[^\\.][1-9]][\\.]")
str_extract(changes$text[1:10], pattern = "[\\.][1-9]][\\.]")
str_extract(changes$text[1:10], pattern = "\\.[1-9]]\\.")
str_extract(changes$text[1:10], pattern = "[\\.][1-9][\\.]")
str_extract(changes$text[1:10], pattern = "[^\\.][1-9][^\\.]")
head(changes)
changes$status <- str_extract(changes$text, pattern = "[1-9][1-9]")
head(changes, 20)
changes[21,]
changes$status[is.na(changes$status)] <- str_extract(changes$text[is.na(changes$status)], pattern = "[^\\.][1-9][^\\.]")
head(changes, 25)
changes$stats[grepl("NA", changes$text)] <- "NC"
changes$stats[!is.na(changes$stats)]
changes$stats[!is.na(changes$stats)] <-changes$status[!is.na(changes$stats)]
changes$stats[!is.na(changes$stats)]
changes$stats[!is.na(changes$stats)&changes$stats!="NC"]
changes$stats[!is.na(changes$stats)&changes$stats!="NC"] <- "NC"
changes$stats[is.na(changes$stats)] <-changes$status[is.na(changes$stats)]
changes$stats[!is.na(changes$stats)]
changes$stats <- NA
changes$stats[grepl("no change"), changes$text] <- "NC"
changes$stats[grepl("no change", changes$text)] <- "NC"
changes$stats[grepl("No change", changes$text)] <- "NC"
changes$stats[grepl("Not applicable", changes$text)] <- "NC"
changes$stats[grepl("NA", changes$text)] <- "NC"
changes$stats[grepl("N/A", changes$text)] <- "NC"
head(changes)
changes$stats[is.na(changes$stats)]
changes$statuss[is.na(changes$stats)]
changes$status[is.na(changes$stats)]
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
changes$stats[is.na(changes$stats)] <- changes$status[is.na(changes$stats)]
head(changes)
head(changes, 25)
changes$stats[is.na(changes$stats)]
no_change <- read.table("FiveYrRev/no_change.txt", header = FALSE, sep = "\t")
head(no_change)
changes$doc[is.na(changes$stats)] %in% no_change$V1
changes$doc[is.na(changes$stats)]
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
changes$stats[changes$doc[is.na(changes$stats)] %in% no_change$V1]
changes$doc[changes$doc[is.na(changes$stats)] %in% no_change$V1]
match(changes$doc[is.na(changes$stats)], no_change$V1)
changes$stats[is.na(changes$stats)&changes$doc %in% no_change$V1]
changes$stats[is.na(changes$stats)&changes$doc %in% no_change$V1] <- "NC"
head(changes, 20)
is.na(changes$stats)
changes$stats[is.na(changes$stats)]
changes[duplicated(changes$doc)]
changes[duplicated(changes$doc), ]
mean(goddamn$scholar[1:31])
mean(goddamn$scholar[1:31], rm.na = TRUE)
mean(goddamn$scholar[1:31], na.rm = TRUE)
mean(goddamn$scholar[32:56], na.rm = TRUE)
median(goddamn$scholar[1:31], na.rm = TRUE)
median(goddamn$scholar[32:56], na.rm = TRUE)
match("bison bison aathabascae", goddamn$Scientific)
match("Bison bison aathabascae", goddamn$Scientific)
match("Bison bison athabascae", goddamn$Scientific)
median(goddamn$scholar[32:187], na.rm = TRUE)
mean(goddamn$scholar[32:187], na.rm = TRUE)
install.packages("lme4")
head(changes)
changes[changes$stats!="NC"& !is.na(changes$stats), ]
changes$stats[changes$doc == "doc3903.pdf"] <- "NC"
changes[changes$stats!="NC"& !is.na(changes$stats), ]
changes$stats[602] <- NA
changes[changes$stats!="NC"& !is.na(changes$stats), 1]
library(ggplot2)
ggplot()+
geom_boxplot(
data = compare$Area[compare$Group == "Plants" & compare$group == "R"] - temp2$md[temp2$Group == "Plants"])
ggplot()+
geom_boxplot(
data = compare$Area[compare$Group == "Plants" & compare$group == "R"] - taxa_stats$Area_md[temp2$Group == "Plants"])
ggplot()+
geom_boxplot(
data = compare$Area[compare$Group == "Plants" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Plants"])
boxplot(
compare$Area[compare$Group == "Plants" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Plants"],
compare$Area[compare$Group == "Insects" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Insects"],
compare$Area[compare$Group == "Amphibians" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Amphibians"],
compare$Area[compare$Group == "Birds" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Birds"],
compare$Area[compare$Group == "Reptiles" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Reptiles"],
compare$Area[compare$Group == "Fish" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Fish"],
compare$Area[compare$Group == "Mammals" & compare$group == "R"] - taxa_stats$Area_md[taxa_stats$Group == "Mammals"])
initial <- read.table("FiveYrRev", header = FALSE, sep - "\t")
initial <- read.table("FiveYrRev", header = FALSE, sep - "\t")
initial <- read.table("FiveYrRev/numbers.txt", header = FALSE, sep - "\t")
initial <- read.table("FiveYrRev/numbers.txt", header = FALSE, sep = "\t")
head(initial)
colnameS(initial) <- c("doc", "pg", "text")
colnames(initial) <- c("doc", "pg", "text")
initial$status <- str_extract(initial$text, pattern = "[:digit:][:digit:]")
head(initial)
initial$status[is.na(initial$status)] <- str_extract(initial$text, pattern = "[^\\.][:digit:][^\\.]")
initial$status <- str_extract(initial$text, pattern = "[:digit:][:digit:]")
initial$status[is.na(initial$status)] <- str_extract(initial$text[is.na(initial$status)], pattern = "[^\\.][:digit:][^\\.]")
head(initial, 25)
initial$status <- str_extract(initial$text, pattern = "[:digit:][:digit:]")
initial$status <- str_extract(initial$text, pattern = "[1][0-8]")
initial$status[is.na(initial$status)] <- str_extract(initial$text[is.na(initial$status)], pattern = "[^\\.][:digit:][^\\.]")
initial[initial$doc == "doc1150.pdf", ]
initial[initial$status == "18", ]
initial[initial$doc == "doc1150.pdf", ]
initial[initial$status == "18", c(1,2,4)]
initial$status <- str_extract(initial$text, pattern = "[1][0-7]")
initial$status[is.na(initial$status)] <- str_extract(initial$text[is.na(initial$status)], pattern = "[^\\.][:digit:][^\\.]")
head(initial)
head(initial, 25)
initial$status <- str_extract(initial$text, pattern = "[1][0-7]")
initial$status[is.na(initial$status)] <- str_extract(initial$text[is.na(initial$status)], pattern = "[^\\.][^:digit:][:digit:][^\\.]")
head(initial, 25)
initial$status <- str_extract(initial$text, pattern = "[1][0-7]")
initial$status[is.na(initial$status)] <- str_extract(initial$text[is.na(initial$status)], pattern = "[^\\.][:digit:][^\\.]")
head(initial, 25)
save.image("C:/Users/mevans/repos/recovery_units/data.RData")
